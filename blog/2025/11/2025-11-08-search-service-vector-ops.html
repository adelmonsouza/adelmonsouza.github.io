<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Day 8/30 â€” Search Service with Vector Ops and Observability Â· The Java Place</title>
  <meta name="description" content="Day 8 do #30DiasJava blueprint: busca textual com PostgreSQL + trigramas, vetores pgvector, indexaÃ§Ã£o incremental, rate limiting e observabilidade completa." />
  <link rel="stylesheet" href="/styles.css" />
  <link rel="canonical" href="https://enouveau.io/blog/2025/11/2025-11-08-search-service-vector-ops.html" />
  <meta property="og:title" content="Day 8/30 â€” Search Service with Vector Ops and Observability" />
  <meta property="og:description" content="Day 8 do #30DiasJava blueprint: busca textual com PostgreSQL + trigramas, vetores pgvector, indexaÃ§Ã£o incremental, rate limiting e observabilidade completa." />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://enouveau.io/blog/2025/11/2025-11-08-search-service-vector-ops.html" />
  <meta property="article:published_time" content="2025-11-08T00:00:00.000Z" />
  <meta property="article:tag" content="Java" />
  <meta property="article:tag" content="Spring Boot" />
  <meta property="article:tag" content="Search" />
  <meta property="article:tag" content="Vector Database" />
  <meta property="article:tag" content="Observability" />
</head>
<body>
  <div class="background-glow"></div>
  <div class="app-shell">
    <header class="masthead">
  <div class="brand">
    <span>ğŸš€</span>
    <span>The Java Place</span>
  </div>
  <nav class="main-nav">
    <a href="/">Home</a>
    <a href="/blog/">Blog</a>
    <a href="/start-line/season-1-becoming-developer.html">Start Line</a>
    <a href="/resources/">Resources</a>
  </nav>
</header>
    
      <a class="back-link" href="/blog/">&larr; Voltar para o blog</a>
      <article class="article">
        <header>
          <span class="pill">30DaysOfJava</span>
          <h1>Day 8/30 â€” Search Service with Vector Ops and Observability</h1>
          <p>Day 8 do #30DiasJava blueprint: busca textual com PostgreSQL + trigramas, vetores pgvector, indexaÃ§Ã£o incremental, rate limiting e observabilidade completa.</p>
          <div class="meta-line">
            <span>ğŸ“… 08 de novembro de 2025</span>
            <span>â±ï¸ 1 min read</span>
            <span>ğŸ—‚ï¸ 30DaysOfJava</span>
          </div>
        </header>
        <div class="article-body">
          <blockquote>
<p>â€œFindability is a feature, not um detalhe.â€ â€” <em>#30DiasJava DX Charter</em></p>
</blockquote>
<h2>ğŸ¯ Objetivo do Day 8</h2>
<p>O Day 8/30 foi sobre discoverability. O desafio: entregar um <strong>Search Service</strong> que combina busca textual com similaridade semÃ¢ntica, servindo desde landing pages atÃ© a assistente do projeto.</p>
<h2>ğŸ› ï¸ Destaques da implementaÃ§Ã£o</h2>
<ul>
<li><strong>Pipeline hÃ­brido</strong>: PostgreSQL com <code>pg_trgm</code> para ranking textual + <code>pgvector</code> para semÃ¢ntica.</li>
<li><strong>IndexaÃ§Ã£o incremental</strong>: eventos <code>ContentIndexedEvent</code> alimentam o worker <code>search-indexer</code>, que normaliza conteÃºdo, gera embeddings e mantÃ©m <code>search_index_audit</code>.</li>
<li><strong>API flexÃ­vel</strong>: endpoint <code>/api/search</code> aceita filtros por tipo, liga/desliga busca semÃ¢ntica e devolve relevÃ¢ncia combinada (rank textual + similaridade).</li>
<li><strong>Quotas e seguranÃ§a</strong>: JWT para consumidores internos, <code>X-API-Key</code> rotacionÃ¡vel para integraÃ§Ãµes, rate limiting em Redis e auditoria anonimizada.</li>
<li><strong>Observabilidade</strong>: mÃ©tricas (<code>search_latency_seconds</code>, <code>search_semantic_usage_total</code>, <code>search_index_backlog</code>), logs com <code>traceId/queryHash</code> e traces do pipeline completo.</li>
</ul>
<h2>ğŸ’¡ LiÃ§Ãµes do dia</h2>
<ul>
<li>Embeddings sÃ³ entregam valor quando convivem com filtros estruturados â€” nÃ£o adianta listas irrelevantes.</li>
<li>VersÃ£o de schema Ã© fundamental: cada documento indexado traz <code>schemaVersion</code> para evitar incompatibilidades.</li>
<li>Backpressure importa: medir backlog de indexaÃ§Ã£o evita que novos conteÃºdos fiquem invisÃ­veis.</li>
</ul>
<h2>ğŸ”— Recursos</h2>
<ul>
<li>Artigo completo: <a href="https://enouveau.io/blog/2025/11/08/search-service-vector-ops.html">https://enouveau.io/blog/2025/11/08/search-service-vector-ops.html</a></li>
<li>PrÃ³ximos passos: cache semÃ¢ntico por consumidor e reindexer automÃ¡tico a cada 90 dias.</li>
</ul>
<hr>
<p><strong>Next episode</strong> â†’ <a href="../2025-11-09-payment-service-ledger.html">Day 9/30 â€” Payment Service, Ledgers, and Idempotent Webhooks</a></p>

        </div>
        <footer class="meta-line">
          <span>Compartilhe no LinkedIn e marque @adelmon</span>
          
        </footer>
      </article>
    
  </div>
  <footer class="site-footer">
  Â© 2025 E-Nouveau â€” The Java Place. Sem fluff, apenas engenharia de verdade.
</footer>
</body>
</html>